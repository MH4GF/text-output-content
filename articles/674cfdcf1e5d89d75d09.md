---
title: "Vercelä¸Šã®Nuxt.jsã§`Could not load Nuxt configuration.` ãŒå‡ºãŸ"
emoji: "ğŸ’¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["nuxtjs","vercel","ssr"]
published: true
---

# èµ·ããŸã“ã¨

Universalãƒ¢ãƒ¼ãƒ‰ã®Nuxt.jsã‚¢ãƒ—ãƒªã‚’Vercelã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚
functionã®ãƒ­ã‚°ã‚’è¦‹ã‚‹ã¨ä»¥ä¸‹ã®ãƒ­ã‚°ãŒæ®‹ã£ã¦ã„ãŸã€‚

```
[GET] /
13:10:38:35
2021-09-25T04:10:38.643Z	undefined	ERROR	Uncaught Exception 	{"errorType":"Error","errorMessage":"Could not load Nuxt configuration. Make sure all dependencies are listed in package.json dependencies or in serverFiles within builder options:\n Error: Cannot find module 'esm'\nRequire stack:\n- /var/task/vercel__launcher.js\n- /var/runtime/UserFunction.js\n- /var/runtime/index.js","stack":["Error: Could not load Nuxt configuration. Make sure all dependencies are listed in package.json dependencies or in serverFiles within builder options:"," Error: Cannot find module 'esm'","Require stack:","- /var/task/vercel__launcher.js","- /var/runtime/UserFunction.js","- /var/runtime/index.js","    at Object.<anonymous> (/var/task/vercel__launcher.js:23:13)","    at Module._compile (internal/modules/cjs/loader.js:1072:14)","    at Object.Module._extensions..js (internal/modules/cjs/loader.js:1101:10)","    at Module.load (internal/modules/cjs/loader.js:937:32)","    at Function.Module._load (internal/modules/cjs/loader.js:778:12)","    at Module.require (internal/modules/cjs/loader.js:961:19)","    at require (internal/modules/cjs/helpers.js:92:18)","    at _tryRequire (/var/runtime/UserFunction.js:75:12)","    at _loadUserApp (/var/runtime/UserFunction.js:95:12)","    at Object.module.exports.load (/var/runtime/UserFunction.js:140:17)"]}
Unknown application error occurred
Error
```

`Error: Cannot find module 'esm'` ã¨ã®ã“ã¨ ğŸ¤”

## å‰æ
- nuxt@2.15.7
- å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¤ã¤ã€ [@nuxtjs/vercel-builder](https://github.com/nuxt/vercel-builder) ã‚’åˆ©ç”¨ã—ã¦ãƒ“ãƒ«ãƒ‰ã—ã¦ã„ã‚‹
  - https://nuxtjs.org/integrations/deployments/vercel/
- vercel.jsonã¯ä»¥ä¸‹ã®é€šã‚Š

```json
{
  "builds": [
    {
      "src": "nuxt.config.js",
      "use": "@nuxtjs/vercel-builder",
      "config": {}
    }
  ]
}
```

## åŸå› 

`nuxt.config.ts` ã§èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒdevDependenciesã«å…¥ã£ã¦ã„ãŸã“ã¨ãŒåŸå› ã§ã—ãŸã€‚ä»Šå›ã¯sassã¨sass-loader
devDependenciesã‹ã‚‰dependenciesã«ç§»å‹•ã—ã¦è§£æ±º
åŒæ§˜ã®äº‹ä¾‹: https://github.com/nuxt/vercel-builder/issues/545#issuecomment-821868398

## æ„Ÿæƒ³

nuxt@2.15ã‹ã‚‰ESMè¨˜æ³•ã®runtime engineã‚’esmã‹ã‚‰jitiã«ç§»è¡Œã—ãŸãŸã‚ãã®ã›ã„ã‹ï¼Ÿã¨æ€ã£ãŸã‚Šã—ã¦è©°ã¾ã‚Šã¾ã—ãŸãŒã€åˆ©ç”¨å´ã®å•é¡Œã§ã—ãŸã€‚ã“ã‚Œã¯åçœ
ã¨ã¯ã„ãˆbuildæ™‚ã«æ°—ã¥ã‘ã‚Œã°è‰¯ã•ãã†ãªã‚“ã ã‘ã©ã€ã©ã†ã™ã‚‹ã®ãŒã„ã„ã‹â€¦
